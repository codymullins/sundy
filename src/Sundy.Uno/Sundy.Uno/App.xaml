<Application x:Class="Sundy.Uno.App"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       xmlns:converters="using:Sundy.Uno.Converters"
       RequestedTheme="Dark">

  <Application.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <!-- Load WinUI resources -->
        <XamlControlsResources xmlns="using:Microsoft.UI.Xaml.Controls" />
        
        <!-- Theme Resources -->
        <ResourceDictionary Source="ms-appx:///Themes/DarkTheme.xaml" />
      </ResourceDictionary.MergedDictionaries>

      <!-- Global Converters -->
      <converters:EqualityConverter x:Key="EqualityConverter" />
      <converters:BoolToBackgroundConverter x:Key="BoolToBackgroundConverter" />
      <converters:BoolToForegroundConverter x:Key="BoolToForegroundConverter" />
      <converters:BoolToFontWeightConverter x:Key="BoolToFontWeightConverter" />
      <converters:InverseBoolConverter x:Key="InverseBoolConverter" />
      <converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />
      <converters:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter" />
      <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
      <converters:BoolToAccentBackgroundConverter x:Key="BoolToAccentBackgroundConverter" />

      <!-- Event Item Template for Calendar -->
      <DataTemplate x:Key="EventItemTemplate" xmlns:vm="using:Sundy.Uno.ViewModels">
        <Border Background="{Binding CalendarColor}"
                CornerRadius="4"
                Padding="6,3"
                Margin="0,1">
          <TextBlock Text="{Binding Title}"
                     FontSize="11"
                     Foreground="White"
                     TextTrimming="CharacterEllipsis"
                     MaxLines="1" />
        </Border>
      </DataTemplate>

      <!-- Default Button Style with subtle hover effects -->
      <Style TargetType="Button">
        <Setter Property="Background" Value="{ThemeResource BackgroundSecondary}" />
        <Setter Property="Foreground" Value="{ThemeResource ForegroundPrimary}" />
        <Setter Property="BorderBrush" Value="{ThemeResource BorderBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Padding" Value="12,6" />
        <Setter Property="HorizontalAlignment" Value="Left" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="CornerRadius" Value="6" />
        <Setter Property="Template">
          <Setter.Value>
            <ControlTemplate TargetType="Button">
              <ContentPresenter x:Name="ContentPresenter"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Content="{TemplateBinding Content}"
                                ContentTemplate="{TemplateBinding ContentTemplate}"
                                ContentTransitions="{TemplateBinding ContentTransitions}"
                                CornerRadius="{TemplateBinding CornerRadius}"
                                Padding="{TemplateBinding Padding}"
                                HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}">
                <VisualStateManager.VisualStateGroups>
                  <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="PointerOver">
                      <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Background">
                          <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource BackgroundHover}" />
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="BorderBrush">
                          <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource BorderBrushHover}" />
                        </ObjectAnimationUsingKeyFrames>
                      </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Pressed">
                      <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Background">
                          <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource BackgroundPressed}" />
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="BorderBrush">
                          <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource BorderBrushHover}" />
                        </ObjectAnimationUsingKeyFrames>
                      </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Disabled">
                      <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Opacity">
                          <DiscreteObjectKeyFrame KeyTime="0" Value="0.5" />
                        </ObjectAnimationUsingKeyFrames>
                      </Storyboard>
                    </VisualState>
                  </VisualStateGroup>
                  <VisualStateGroup x:Name="FocusStates">
                    <VisualState x:Name="Focused" />
                    <VisualState x:Name="Unfocused" />
                    <VisualState x:Name="PointerFocused" />
                  </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
              </ContentPresenter>
            </ControlTemplate>
          </Setter.Value>
        </Setter>
      </Style>

      <!-- Accent Button Style for primary actions -->
      <Style x:Key="AccentButtonStyle" TargetType="Button">
        <Setter Property="Background" Value="{ThemeResource AccentPrimary}" />
        <Setter Property="Foreground" Value="{ThemeResource ForegroundOnAccent}" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="14,0" />
        <Setter Property="HorizontalAlignment" Value="Left" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="CornerRadius" Value="18" />
        <Setter Property="Template">
          <Setter.Value>
            <ControlTemplate TargetType="Button">
              <ContentPresenter x:Name="ContentPresenter"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Content="{TemplateBinding Content}"
                                ContentTemplate="{TemplateBinding ContentTemplate}"
                                ContentTransitions="{TemplateBinding ContentTransitions}"
                                CornerRadius="{TemplateBinding CornerRadius}"
                                Padding="{TemplateBinding Padding}"
                                HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}">
                <VisualStateManager.VisualStateGroups>
                  <VisualStateGroup x:Name="CommonStates">
                    <VisualState x:Name="Normal" />
                    <VisualState x:Name="PointerOver">
                      <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Background">
                          <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource AccentHover}" />
                        </ObjectAnimationUsingKeyFrames>
                      </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Pressed">
                      <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Background">
                          <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource AccentPressed}" />
                        </ObjectAnimationUsingKeyFrames>
                      </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Disabled">
                      <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="Opacity">
                          <DiscreteObjectKeyFrame KeyTime="0" Value="0.5" />
                        </ObjectAnimationUsingKeyFrames>
                      </Storyboard>
                    </VisualState>
                  </VisualStateGroup>
                  <VisualStateGroup x:Name="FocusStates">
                    <VisualState x:Name="Focused" />
                    <VisualState x:Name="Unfocused" />
                    <VisualState x:Name="PointerFocused" />
                  </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
              </ContentPresenter>
            </ControlTemplate>
          </Setter.Value>
        </Setter>
      </Style>

      <Style x:Key="DefaultButtonStyle" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}" />

    </ResourceDictionary>
  </Application.Resources>

</Application>
